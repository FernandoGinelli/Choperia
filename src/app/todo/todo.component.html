<main class="container">
  <h1>Lista Self-Service</h1>
  <form *ngIf="taskRepo.metadata.apiInsertAllowed" (submit)="addTask()">
    <input placeholder="Oque tem que ser feito?" [(ngModel)]="newTaskTitle" name="newTaskTitle" />
    <button class="btn btn-primary ">Adicionar </button>
  </form>
  <div class="table-container">
    <table class="table">
      <thead>
        <tr>
          <th scope="col">Concluído</th>
          <th scope="col">Título</th>
          <th scope="col">Ações</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let task of tasks">
          <td>
            <input type="checkbox" [(ngModel)]="task.completed" (change)="saveTask(task)" />
          </td>
          <td>
            <input [(ngModel)]="task.title" />
          </td>
          <td>
            <button *ngIf="taskRepo.metadata.apiUpdateAllowed" (click)="saveTask(task)">Salvar</button>
            <button *ngIf="taskRepo.metadata.apiDeleteAllowed" (click)="deleteTask(task)">Deletar</button>
          </td>
        </tr>
      </tbody>
    </table>
    </div>
    <div class="buttons">
      <button (click)="setAllCompleted(true)" class="btn btn-primary btn-sm mr-2">Marcar tudo como Completo</button>
      <button (click)="setAllCompleted(false)" class="btn btn-danger btn-sm mr-2">Marcar tudo como Incompleto</button>
    </div>
</main>
